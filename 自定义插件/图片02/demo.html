<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>label</title>

<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript">

// 修正FF浏览器兼容
function getOffset(e) {
    var target = e.target;
    if (target.offsetLeft == undefined) {
        target = target.parentNode;
    }
    var pageCoord = getPageCoord(target);
    var eventCoord = {
        x: window.pageXOffset + e.clientX,
        y: window.pageYOffset + e.clientY
    };
    var offset = {
        offsetX: eventCoord.x - pageCoord.x,
        offsetY: eventCoord.y - pageCoord.y
    };
    return offset;
}

function getPageCoord(element) {
    var coord = {
        x: 0,
        y: 0
    };
    while (element) {
        coord.x += element.offsetLeft;
        coord.y += element.offsetTop;
        element = element.offsetParent;
    }
    return coord;
}

$(document).ready(function(){
	
	$(".items .img").hover(function(e){
		
		var _this  = $(this), //闭包
		_desc  = _this.find(".desc").stop(true),
		width  = _this.width(), //取得元素宽
		height = _this.height(), //取得元素高
		left   = (e.offsetX == undefined) ? getOffset(e).offsetX : e.offsetX, //从鼠标位置，得到左边界，利用修正ff兼容的方法
		top    = (e.offsetY == undefined) ? getOffset(e).offsetY : e.offsetY, //得到上边界
		right  = width - left, //计算出右边界
		bottom = height - top, //计算出下边界
		rect   = {}, //坐标对象，用于执行对应方法。
		_min   = Math.min(left, top, right, bottom), //得到最小值
		_out   = e.type == "mouseleave", //是否是离开事件
		spos   = {}; //起始位置
	
		rect[left] = function (epos){ //鼠从标左侧进入和离开事件
			spos = {"left": -width, "top": 0};
			if(_out){
				_desc.animate(spos, "fast"); //从左侧离开
			}else{
				_desc.css(spos).animate(epos, "fast"); //从左侧进入
			}
		};
	
		rect[top] = function (epos) { //鼠从标上边界进入和离开事件
			spos = {"top": -height, "left": 0};
			if(_out){
				_desc.animate(spos, "fast"); //从上面离开
			}else{
				_desc.css(spos).animate(epos, "fast"); //从上面进入
			}
		};
	
		rect[right] = function (epos){ //鼠从标右侧进入和离开事件
			spos = {"left": left,"top": 0};
			if(_out){
				_desc.animate(spos, "fast"); //从右侧成离开
			}else{
				_desc.css(spos).animate(epos, "fast"); //从右侧进入
			}
		};
	
		rect[bottom] = function (epos){ //鼠从标下边界进入和离开事件
			spos = {"top": height, "left": 0};
			if(_out){
				_desc.animate(spos, "fast"); //从底部离开
			}else{
				_desc.css(spos).animate(epos, "fast"); //从底部进入
			}
		};
	
		rect[_min]({"left":0, "top":0}); // 执行对应边界 进入/离开 的方法
	
	});

});
</script>

<style type="text/css">
*{margin:0px;padding:0px;font:12px/2 微软雅黑;list-style-type:none;}
#main{width:960px;margin:20px auto;}

/* items */
.items{width:216px;border:1px solid #dcdcdc;overflow:hidden;float:left;margin:15px 15px 0 0;background-color:#fff;}
.items .img{height:300px;overflow:hidden;position:relative;}
.items .desc{height:270px;width:186px;padding:15px;position:absolute;top:-300px;left:0px;color:#fff;background:#000;opacity:0.7;filter:alpha(opacity=70);}
.items .title{border-top:1px solid #dcdcdc;padding:7px 14px;}
</style>

</head>
<body>

	<div id="main">
	
		<div class="items">
			<div class="img">
				<img src="images/label_1.jpg" width="216" height="300">
				<div class="desc">这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、</div>
			</div>
			<div class="title">鸣人</div>
		</div>
	
		<div class="items">
			<div class="img">
				<img src="images/label_2.jpg" width="216" height="300">
				<div class="desc">这货是鸣人他爹、这货是鸣人他爹、这货是鸣人他爹、这货是鸣人他爹、这货是鸣人他爹、</div>
			</div>
			<div class="title">鸣人他爹</div>
		</div>
	
		<div class="items">
			<div class="img">
				<img src="images/label_3.jpg" width="216" height="300">
				<div class="desc">这货是我爱罗、这货是我爱罗、这货是我爱罗、这货是我爱罗、这货是我爱罗、</div>
			</div>
			<div class="title">我爱罗</div>
		</div>
	
		<div class="items">
			<div class="img">
				<img src="images/label_4.jpg" width="216" height="300">
				<div class="desc">这货是斑、这货是斑、这货是斑、这货是斑、这货是斑、这货是斑、这货是斑、</div>
			</div>
			<div class="title">斑</div>
		</div>
	
		<div class="items">
			<div class="img">
				<img src="images/label_1.jpg" width="216" height="300">
				<div class="desc">这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、这货是鸣人、</div>
			</div>
			<div class="title">鸣人</div>
		</div>
	
		<div class="items">
			<div class="img">
				<img src="images/label_2.jpg" width="216" height="300">
				<div class="desc">这货是鸣人他爹、这货是鸣人他爹、这货是鸣人他爹、这货是鸣人他爹、这货是鸣人他爹、</div>
			</div>
			<div class="title">鸣人他爹</div>
		</div>
	
		<div class="items">
			<div class="img">
				<img src="images/label_3.jpg" width="216" height="300">
				<div class="desc">这货是我爱罗、这货是我爱罗、这货是我爱罗、这货是我爱罗、这货是我爱罗、</div>
			</div>
			<div class="title">我爱罗</div>
		</div>
	
		<div class="items">
			<div class="img">
				<img src="images/label_4.jpg" width="216" height="300">
				<div class="desc">这货是斑、这货是斑、这货是斑、这货是斑、这货是斑、这货是斑、这货是斑、</div>
			</div>
			<div class="title">斑</div>
		</div>
	
	</div>


</body>
</html>